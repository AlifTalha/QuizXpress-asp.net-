@{
    ViewData["Title"] = "Daily Limit Exceeded - QuizBoard";
}

<div class="container-fluid vh-100 d-flex align-items-center justify-content-center">
    <div class="row w-100 justify-content-center">
        <div class="col-lg-6 col-md-8 col-sm-10">
            <div class="sorry-card text-center">
                <div class="card-body py-5">
                    <!-- Sorry Icon -->
                    <div class="sorry-icon mb-4">
                        <i class="bi bi-exclamation-triangle-fill text-warning" style="font-size: 4rem;"></i>
                    </div>

                    <!-- Main Message -->
                    <h1 class="display-6 mb-3 text-dark fs-2">
                        দুঃখিত !
                    </h1>

                    <div class="message-content mb-4">
                        <p class="lead text-danger mb-3">
                            You are not allowed to play today
                        </p>
                        <p class="text-muted mb-2">
                            You have already played the quiz <strong>3 times</strong> today.
                        </p>
                        <p class="text-muted">
                            Please try again tomorrow for more quiz opportunities!
                        </p>
                    </div>

                    <!-- Play Limit Info -->
                    <div class="limit-info-box mb-4">
                        <div class="row">
                            <div class="col-6">
                                <div class="info-item">
                                    <i class="bi bi-calendar-day text-primary mb-2" style="font-size: 1.5rem;"></i>
                                    <h6 class="mb-1">Daily Limit</h6>
                                    <strong class="text-primary">3 Times</strong>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="info-item">
                                    <i class="bi bi-clock text-success mb-2" style="font-size: 1.5rem;"></i>
                                    <h6 class="mb-1">Reset Time</h6>
                                    <strong class="text-success">Midnight</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Countdown Timer -->
                    <div class="countdown-section mb-4">
                        <h6 class="text-muted mb-3">Time until next opportunity:</h6>
                        <div class="countdown-display">
                            <div class="row justify-content-center">
                                <div class="col-3">
                                    <div class="time-unit">
                                        <span id="hours" class="time-number">00</span>
                                        <small class="time-label">Hours</small>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="time-unit">
                                        <span id="minutes" class="time-number">00</span>
                                        <small class="time-label">Minutes</small>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="time-unit">
                                        <span id="seconds" class="time-number">00</span>
                                        <small class="time-label">Seconds</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <a href="@Url.Action("Index", "Quiz")" class="btn btn-primary btn-lg px-4 me-3">
                            <i class="bi bi-house-fill me-2"></i>Back to Home
                        </a>
                        <button class="btn btn-outline-info btn-lg px-4" onclick="showShareModal()">
                            <i class="bi bi-share me-2"></i>Share with Friends
                        </button>
                    </div>

                    <!-- Motivational Message -->
                    <div class="motivational-message mt-4">
                        <div class="alert alert-light border">
                            <i class="bi bi-lightbulb text-warning me-2"></i>
                            <strong>Tip:</strong> While you wait, why not challenge your friends to beat your best score?
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Share Modal -->
<div class="modal fade" id="shareModal" tabindex="-1" aria-labelledby="shareModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="shareModalLabel">
                    <i class="bi bi-share me-2"></i>Share QuizBoard
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center">
                <p class="mb-3">Challenge your friends to play QuizBoard!</p>
                <div class="share-buttons">
                    <button class="btn btn-success btn-sm me-2" onclick="shareWhatsApp()">
                        <i class="bi bi-whatsapp me-1"></i>WhatsApp
                    </button>
                    <button class="btn btn-primary btn-sm me-2" onclick="shareFacebook()">
                        <i class="bi bi-facebook me-1"></i>Facebook
                    </button>
                    <button class="btn btn-info btn-sm" onclick="copyLink()">
                        <i class="bi bi-link-45deg me-1"></i>Copy Link
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    <style>
        .sorry-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border: 1px solid #e9ecef;
        }

        .sorry-icon {
            animation: bounce 2s infinite;
        }

      

        .limit-info-box {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #e9ecef;
        }

        .info-item {
            text-align: center;
        }

        .countdown-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 20px;
            color: white;
        }

        .time-unit {
            text-align: center;
        }

        .time-number {
            display: block;
            font-size: 1.8rem;
            font-weight: bold;
            color: white;
        }

        .time-label {
            display: block;
            font-size: 0.8rem;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .motivational-message {
            max-width: 400px;
            margin: 0 auto;
        }

        .share-buttons button {
            min-width: 100px;
            margin-bottom: 10px;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
    </style>
}

@section Scripts {
    <script>
        // Countdown Timer
        function updateCountdown() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);

            const timeLeft = tomorrow.getTime() - now.getTime();

            const hours = Math.floor(timeLeft / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

            document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
        }

        // Start countdown
        updateCountdown();
        setInterval(updateCountdown, 1000);

        // Share functions
        function showShareModal() {
            const shareModal = new bootstrap.Modal(document.getElementById('shareModal'));
            shareModal.show();
        }

        function shareWhatsApp() {
            const text = "Hey! I found this awesome QuizBoard game. Challenge yourself and test your knowledge! " + window.location.origin;
            window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank');
        }

        function shareFacebook() {
            const url = window.location.origin;
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.origin).then(() => {
                alert('Link copied to clipboard!');
            });
        }
    </script>
}